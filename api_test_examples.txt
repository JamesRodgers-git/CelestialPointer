# Celestial Pointer API Test Examples
# These are example curl commands to test the API endpoints
# Replace localhost:8000 with your actual server address if different

# ============================================================================
# Basic Status and Information
# ============================================================================

# Get API root information
curl http://localhost:8000/

# Get current system status
curl http://localhost:8000/status

# Get laser status
curl http://localhost:8000/laser/status


# ============================================================================
# Stars
# ============================================================================

# Point at a star by name (Sirius)
curl -X POST http://localhost:8000/target/star \
  -H "Content-Type: application/json" \
  -d '{"star_name": "Sirius"}'

# Point at a star by name (Vega)
curl -X POST http://localhost:8000/target/star \
  -H "Content-Type: application/json" \
  -d '{"star_name": "Vega"}'

# Point at a star by HIP number (Sirius = HIP32349)
curl -X POST http://localhost:8000/target/star \
  -H "Content-Type: application/json" \
  -d '{"star_name": "HIP32349"}'

# Point at a star by HIP number without prefix (Polaris = 11767)
curl -X POST http://localhost:8000/target/star \
  -H "Content-Type: application/json" \
  -d '{"star_name": "11767"}'

# Point at other common stars
curl -X POST http://localhost:8000/target/star \
  -H "Content-Type: application/json" \
  -d '{"star_name": "Polaris"}'

curl -X POST http://localhost:8000/target/star \
  -H "Content-Type: application/json" \
  -d '{"star_name": "Arcturus"}'

curl -X POST http://localhost:8000/target/star \
  -H "Content-Type: application/json" \
  -d '{"star_name": "Capella"}'


# ============================================================================
# Planet and Moon
# ============================================================================

# Point at the Moon
curl -X POST http://localhost:8000/target/planet \
  -H "Content-Type: application/json" \
  -d '{"planet_name": "moon"}'

# Point at Mars
curl -X POST http://localhost:8000/target/planet \
  -H "Content-Type: application/json" \
  -d '{"planet_name": "Mars"}'

# Point at Jupiter
curl -X POST http://localhost:8000/target/planet \
  -H "Content-Type: application/json" \
  -d '{"planet_name": "Jupiter"}'

# Point at Saturn
curl -X POST http://localhost:8000/target/planet \
  -H "Content-Type: application/json" \
  -d '{"planet_name": "Saturn"}'

# Point at Venus
curl -X POST http://localhost:8000/target/planet \
  -H "Content-Type: application/json" \
  -d '{"planet_name": "Venus"}'


# ============================================================================
# Satellite
# ============================================================================

# Point at the International Space Station (by name)
curl -X POST http://localhost:8000/target/satellite \
  -H "Content-Type: application/json" \
  -d '{"satellite_id": "ISS"}'

# Point at ISS by NORAD ID
curl -X POST http://localhost:8000/target/satellite \
  -H "Content-Type: application/json" \
  -d '{"satellite_id": "25544"}'

# Point at nearest visible satellite from groups
curl -X POST http://localhost:8000/target/nearest-group \
  -H "Content-Type: application/json" \
  -d '{}'

# Point at nearest visible satellite with custom groups and elevation
curl -X POST http://localhost:8000/target/nearest-group \
  -H "Content-Type: application/json" \
  -d '{
    "groups": [
      {
        "group_name": "stations",
        "limit": null
      },
      {
        "group_name": "visual",
        "limit": 50
      }
    ],
    "min_elevation": 10.0
  }'

# Get list of preloaded satellites (JSON format)
curl http://localhost:8000/satellites

# Get list of preloaded satellites (formatted table)
curl http://localhost:8000/satellites?format=table



# ============================================================================
# Orientation Pointing
# ============================================================================

# Point at specific azimuth and elevation (azimuth 180°, elevation 45°)
curl -X POST http://localhost:8000/target/orientation \
  -H "Content-Type: application/json" \
  -d '{"azimuth": 180.0, "elevation": 45.0}'

# Point directly overhead (azimuth 0°, elevation 90°)
curl -X POST http://localhost:8000/target/orientation \
  -H "Content-Type: application/json" \
  -d '{"azimuth": 0.0, "elevation": 90.0}'

# Point at horizon (azimuth 90°, elevation 0°)
curl -X POST http://localhost:8000/target/orientation \
  -H "Content-Type: application/json" \
  -d '{"azimuth": 90.0, "elevation": 0.0}'


# ============================================================================
# Laser Control
# ============================================================================

# Toggle laser on/off
curl -X POST http://localhost:8000/laser/toggle

# Turn laser on
curl -X POST http://localhost:8000/laser/toggle \
  -H "Content-Type: application/json" \
  -d '{"state": true}'

# Turn laser off
curl -X POST http://localhost:8000/laser/toggle \
  -H "Content-Type: application/json" \
  -d '{"state": false}'


# ============================================================================
# Default Body Management
# ============================================================================

# Set default body to a star
curl -X POST http://localhost:8000/default-target \
  -H "Content-Type: application/json" \
  -d '{
    "target_type": "star",
    "target_value": "Sirius"
  }'

# Set default body to a planet
curl -X POST http://localhost:8000/default-target \
  -H "Content-Type: application/json" \
  -d '{
    "target_type": "planet",
    "target_value": "Mars"
  }'

# Set default body to a satellite
curl -X POST http://localhost:8000/default-target \
  -H "Content-Type: application/json" \
  -d '{
    "target_type": "satellite",
    "target_value": "ISS"
  }'

# Set default body to an orientation
curl -X POST http://localhost:8000/default-target \
  -H "Content-Type: application/json" \
  -d '{
    "target_type": "orientation",
    "target_value": "orientation",
    "azimuth": 180.0,
    "elevation": 45.0
  }'

# Set default body to nearest group (nearest visible satellite)
curl -X POST http://localhost:8000/default-target \
  -H "Content-Type: application/json" \
  -d '{
    "target_type": "group"
  }'

# Set default body to nearest group with custom groups and elevation
curl -X POST http://localhost:8000/default-target \
  -H "Content-Type: application/json" \
  -d '{
    "target_type": "group",
    "groups": [
      {
        "group_name": "stations",
        "limit": null
      },
      {
        "group_name": "visual",
        "limit": 50
      }
    ],
    "min_elevation": 10.0
  }'

# Get current default body
curl http://localhost:8000/default-target

# Clear default body
curl -X DELETE http://localhost:8000/default-target

# Point at the default body
curl -X POST http://localhost:8000/target/default


# ============================================================================
# Startup Behavior Control
# ============================================================================

# Get current startup behavior
curl http://localhost:8000/startup-behavior

# Enable default body on startup
curl -X POST http://localhost:8000/startup-behavior \
  -H "Content-Type: application/json" \
  -d '{
    "use_default_on_startup": true
  }'

# Disable default body on startup
curl -X POST http://localhost:8000/startup-behavior \
  -H "Content-Type: application/json" \
  -d '{
    "use_default_on_startup": false
  }'


# ============================================================================
# Location Management
# ============================================================================

# Get current location
curl http://localhost:8000/location

# Update location (must detarget first if currently targeting)
curl -X POST http://localhost:8000/location \
  -H "Content-Type: application/json" \
  -d '{
    "latitude": 40.7128,
    "longitude": -74.0060,
    "altitude": 0.0
  }'


# ============================================================================
# ============================================================================

# Stop pointing and turn off laser
curl -X POST http://localhost:8000/detarget


# ============================================================================
# Error Testing
# ============================================================================

# Test invalid star name (should return 404)
curl -X POST http://localhost:8000/target/star \
  -H "Content-Type: application/json" \
  -d '{"star_name": "NonexistentStar"}'

# Test invalid planet name (should return 404)
curl -X POST http://localhost:8000/target/planet \
  -H "Content-Type: application/json" \
  -d '{"planet_name": "Pluto2"}'

# Test invalid orientation (missing elevation, should return 400)
curl -X POST http://localhost:8000/target/orientation \
  -H "Content-Type: application/json" \
  -d '{"azimuth": 180.0}'

# Test pointing at default body when none is set (should return 404)
curl -X POST http://localhost:8000/target/default

# Test updating location while targeting (should return 409)
# (First point at something, then try to update location)
curl -X POST http://localhost:8000/target/star \
  -H "Content-Type: application/json" \
  -d '{"star_name": "Sirius"}'
curl -X POST http://localhost:8000/location \
  -H "Content-Type: application/json" \
  -d '{"latitude": 40.7128, "longitude": -74.0060}'


# ============================================================================
# Notes
# ============================================================================
#
# - Replace localhost:8000 with your actual server address if running remotely
# - The API server must be running before executing these commands
# - Some commands may fail if the system is not calibrated
# - Satellite pointing requires internet connection to fetch TLE data
# - Star/planet positions are calculated in real-time based on your location
# - Install jq for pretty JSON output: sudo apt-get install jq (Debian/Ubuntu)
#   or: brew install jq (macOS)
#
# Example with remote server:
#   curl http://192.168.1.100:8000/status
#
# Example with authentication (if added):
#   curl -H "Authorization: Bearer YOUR_TOKEN" http://localhost:8000/status

